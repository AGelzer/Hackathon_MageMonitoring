<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * Hackathon
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/osl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    Hackathon
 * @package     Hackathon_MageMonitoring
 * @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
 */
-->
<config>
    <modules>
        <Hackathon_MageMonitoring>
            <version>1.1.0</version>
            <depends>
                <Mage_Adminhtml />
            </depends>
        </Hackathon_MageMonitoring>
    </modules>

    <global>
        <blocks>
            <magemonitoring>
                <class>Hackathon_MageMonitoring_Block</class>
            </magemonitoring>
        </blocks>

        <models>
            <magemonitoring>
                <class>Hackathon_MageMonitoring_Model</class>
                <resourceModel>magemonitoring_resource</resourceModel>
            </magemonitoring>
            <magemonitoring_resource>
                <class>Hackathon_MageMonitoring_Model_Resource</class>
                <entities>
                </entities>
            </magemonitoring_resource>
            <!-- Fake model rewrite -->
            <!--<catalog>-->
            <!--<rewrite>-->
            <!--<category>Hackathon_MageMonitoring_Model_Category</category>-->
            <!--</rewrite>-->
            <!--</catalog>-->
            <!-- / Fake model rewrite -->
        </models>

        <helpers>
            <magemonitoring>
                <class>Hackathon_MageMonitoring_Helper</class>
            </magemonitoring>
        </helpers>

        <template>
            <email>
                <magemonitoring_watchdog_report module="magemonitoring">
                    <label>MageMonitoring Watch Dog Reports</label>
                    <file>magemonitoring_watchdogs.html</file>
                    <type>html</type>
                </magemonitoring_watchdog_report>
            </email>
        </template>

        <widgets>
            <magemonitoring>
                <folder>Model/Widget</folder>
            </magemonitoring>
        </widgets>

        <!-- PLUGIN CONFIG -->

        <healthcheck>
            <shop_status>
                <model>magemonitoring/check_shopStatus</model>
                <type>static</type>
                <versions>
                    *
                </versions>
                <content_type>table</content_type>
                <title>Shop-Status</title>
                <sort_order>2</sort_order>
            </shop_status>

            <sitemap>
                <model>magemonitoring/check_sitemap</model>
                <versions>
                    *
                    1.6.2
                    1.3*
                    1.7.0*
                </versions>
                <type>static</type>
                <content_type>table</content_type>
                <title>Sitemap/robots.txt</title>
                <sort_order>3</sort_order>
            </sitemap>

            <producttypes>
                <active>true</active>
                <model>magemonitoring/check_producttypes</model>
                <type>ondemand</type>
                <content_type>donutchart</content_type>
                <title>Product Types</title>
                <sort_order>4</sort_order>
            </producttypes>

            <productcomposition>
                <active>true</active>
                <model>magemonitoring/check_productComposition</model>
                <type>ondemand</type>
                <content_type>table</content_type>
                <title>Product Composition</title>
                <sort_order>1</sort_order>
            </productcomposition>

            <logfilesize>
                <active>true</active>
                <model>magemonitoring/check_logfilesize</model>
                <type>ondemand</type>
                <content_type>barchart</content_type>
                <title>Logfile Size</title>
                <sort_order>25</sort_order>
            </logfilesize>

            <mediasize>
                <model>magemonitoring/check_mediasize</model>
                <type>static</type>
                <content_type>table</content_type>
                <title>Media Dir Size</title>
            </mediasize>

            <shop_configuration>
                <model>magemonitoring/check_shopConfiguration</model>
                <type>static</type>
                <content_type>table</content_type>
                <title>Shop Configuration</title>
                <values>
                    <flat_table_product>
                        <path>catalog/frontend/flat_catalog_product</path>
                        <recommendation>1</recommendation>
                    </flat_table_product>
                    <flat_table_category>
                        <path>catalog/frontend/flat_catalog_category</path>
                        <recommendation>1</recommendation>
                    </flat_table_category>
                    <system_smtp_disable>
                        <path>system/smtp/disable</path>
                        <recommendation>0</recommendation>
                    </system_smtp_disable>
                    <dev_log_active>
                        <path>dev/log/active</path>
                        <recommendation>1</recommendation>
                    </dev_log_active>
                    <dev_js_merge_files>
                        <path>dev/js/merge_files</path>
                        <recommendation>1</recommendation>
                    </dev_js_merge_files>
                    <dev_css_merge_css_files>
                        <path>dev/css/merge_css_files</path>
                        <recommendation>1</recommendation>
                    </dev_css_merge_css_files>
                    <admin_security_use_form_key>
                        <path>admin/security/use_form_key</path>
                        <recommendation>1</recommendation>
                    </admin_security_use_form_key>
                    <admin_url_use_custom>
                        <path>admin/url/use_custom</path>
                        <recommendation>1</recommendation>
                    </admin_url_use_custom>
                    <admin_url_custom>
                        <path>admin/url/custom</path>
                    </admin_url_custom>
                </values>
                <sort_order>1</sort_order>
            </shop_configuration>
        </healthcheck>

        <!-- PLUGIN CONFIG END -->

    </global>

    <admin>
        <routers>
            <magemonitoring>
                <use>admin</use>
                <args>
                    <module>Hackathon_MageMonitoring</module>
                    <frontName>monitoring</frontName>
                    <modules>
                        <magemonitoring before="Mage_Adminhtml">Hackathon_MageMonitoring_Adminhtml</magemonitoring>
                    </modules>
                </args>
            </magemonitoring>
        </routers>
    </admin>

    <adminhtml>
        <layout>
            <updates>
                <magemonitoring>
                    <file>monitoring.xml</file>
                </magemonitoring>
            </updates>
        </layout>

        <translate>
            <modules>
                <magemonitoring>
                    <files>
                        <default>Hackathon_MageMonitoring.csv</default>
                    </files>
                </magemonitoring>
            </modules>
        </translate>
    </adminhtml>

    <crontab>
        <jobs>
            <magemonitoring_uberdog>
                <schedule>
                    <cron_expr>* * * * *</cron_expr>
                </schedule>
                <run>
                    <model>magemonitoring/watchDog_uberDog::triggerActiveDogs</model>
                </run>
            </magemonitoring_uberdog>
        </jobs>
    </crontab>

    <default>
        <magemonitoring>
            <tabs>
                <dashboard>
                    <label>Dashboard</label>
                    <title>Dashboard</title>
                    <block>magemonitoring/system_overview_read_tabs_dashboard</block>
                    <widgets/>
                </dashboard>
                <system_overview>
                    <label>System Overview</label>
                    <title>System Overview</title>
                    <widgets>
                      <magento_info>
                        <impl>Hackathon_MageMonitoring_Model_Widget_System_Magento</impl>
                      </magento_info>
                      <server_info>
                        <impl>Hackathon_MageMonitoring_Model_Widget_System_Server</impl>
                      </server_info>
                      <watch_dog_control>
                        <impl>Hackathon_MageMonitoring_Model_Widget_System_Watchdog</impl>
                      </watch_dog_control>
                    </widgets>
                </system_overview>
                <php_info>
                    <label>PHP Information</label>
                    <title>PHP Information</title>
                    <block>magemonitoring/system_overview_read_tabs_php</block>
                    <widgets>
                    </widgets>
                </php_info>
                <cache_stat>
                    <label>Cache Statistics</label>
                    <title>Cache Statistics</title>
                    <widgets>
                      <apc>
                        <impl>Hackathon_MageMonitoring_Model_Widget_CacheStat_Apc</impl>
                      </apc>
                      <apcu>
                        <imp>Hackathon_MageMonitoring_Model_Widget_CacheStat_Apcu</imp>
                      </apcu>
                      <memcached>
                        <impl>Hackathon_MageMonitoring_Model_Widget_CacheStat_Memcache</impl>
                      </memcached>
                      <redis>
                        <impl>Hackathon_MageMonitoring_Model_Widget_CacheStat_Redis</impl>
                      </redis>
                      <zendopcache>
                        <impl>Hackathon_MageMonitoring_Model_Widget_CacheStat_Zendopcache</impl>
                      </zendopcache>
                    </widgets>
                </cache_stat>
                <class_rewrites>
                    <label>Class Rewrites</label>
                    <title>Class Rewrites</title>
                    <block>magemonitoring/system_overview_read_tabs_rewrites</block>
                    <widgets>
                    </widgets>
                </class_rewrites>
                <modules_installed>
                    <label>Modules Installed</label>
                    <title>Modules Installed</title>
                    <block>magemonitoring/system_overview_read_tabs_modules</block>
                    <widgets>
                    </widgets>
                </modules_installed>
                <system_logs>
                    <label>System Logs</label>
                    <title>System Logs</title>
                    <widgets>
                      <magento_debug>
                        <impl>Hackathon_MageMonitoring_Model_Widget_Log_Debug</impl>
                      </magento_debug>
                      <magento_exception>
                        <impl>Hackathon_MageMonitoring_Model_Widget_Log_Exception</impl>
                      </magento_exception>
                    </widgets>
                </system_logs>
            </tabs>
        </magemonitoring>
    </default>

</config>
